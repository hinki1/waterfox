# 'nightly' contains things that are in nightly mozconfigs and allowed to be missing from release builds.
# Other keys in whitelist contain things are in that branches mozconfigs and allowed to be missing from nightly builds.
whitelist = {
    'release': {},
    'nightly': {},
    }

all_platforms = ['linux64']

for platform in all_platforms:
    whitelist['nightly'][platform] = [
        'ac_add_options --enable-update-channel=nightly',
        'ac_add_options --with-branding=browser/branding/nightly',
        'ac_add_options --enable-profiling',
        'mk_add_options CLIENT_PY_ARGS="--hg-options=\'--verbose --time\' --hgtool=../tools/buildfarm/utils/hgtool.py --skip-chatzilla --skip-comm --skip-inspector --tinderbox-print"'
    ]

for platform in ['linux64']:
    whitelist['nightly'][platform] += [
        'mk_add_options MOZ_MAKE_FLAGS="-j4"',
    ]

for platform in all_platforms:
    whitelist['release'][platform] = [
        'ac_add_options --enable-update-channel=release',
        'ac_add_options --enable-official-branding',
        'mk_add_options MOZ_MAKE_FLAGS="-j4"',
        'export BUILDING_RELEASE=1',
        'if [ -n "$ENABLE_RELEASE_PROMOTION" ]; then',
        'MOZ_AUTOMATION_UPLOAD_SYMBOLS=${MOZ_AUTOMATION_UPLOAD_SYMBOLS-1}',
        'MOZ_AUTOMATION_UPDATE_PACKAGING=1',
        'fi',
    ]

whitelist['release']['linux64'] += [
    'export MOZILLA_OFFICIAL=1',
    'export MOZ_TELEMETRY_REPORTING=1',
    'mk_add_options MOZ_PGO=1',
    "mk_add_options PROFILE_GEN_SCRIPT='$(PYTHON) @MOZ_OBJDIR@/_profile/pgo/profileserver.py 10'",
]

if __name__ == '__main__':
    import pprint
    pprint.pprint(whitelist)
